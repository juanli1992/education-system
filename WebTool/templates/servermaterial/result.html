<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <title>学生成长分析平台</title>

    <!-- Favicons -->
    <link href="/templates/servermaterial/img/favicon.png" rel="icon">
    <link href="/templates/servermaterial/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Bootstrap core CSS -->
    <link href="/templates/servermaterial/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!--external css-->
    <link href="/templates/servermaterial/lib/font-awesome/css/font-awesome.css" rel="stylesheet" />

    <link rel="stylesheet" href="/templates/servermaterial/lib/advanced-datatable/css/DT_bootstrap.css" />
    <link href="/templates/servermaterial/lib/advanced-datatable/css/jquery.dataTables.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="/templates/servermaterial/css/style.css" rel="stylesheet">
    <link href="/templates/servermaterial/css/style-responsive.css" rel="stylesheet">

    <!-- =======================================================
        Template Name: Dashio
        Template URL: https://templatemag.com/dashio-bootstrap-admin-template/
        Author: TemplateMag.com
        License: https://templatemag.com/license/
    ======================================================= -->

  </head>
  <body>
    <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
    <!--header start-->
    {% include 'servermaterial/header.html' %}
    <!--header end-->

    <!--sidebar start-->
    {% include 'servermaterial/sidebar.html' %}
    <!--sidebar end-->

    <!-- **********************************************************************************************************************************************************
    MAIN CONTENT
    *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content">
      <section class="wrapper site-min-height">
        <div class="col-lg-12 mt">
          <div class="row content-panel">
            <div class="col-lg-12 detailed mt">
              <h4>查询选项</h4>
              <div>

                <div class="form-group col-lg-4">
                  <label class="col-lg-3 control-label">学号</label>
                  <div class="col-lg-8">
                    <input type="text" id="stuid" class="form-control">
                  </div>
                </div>
                <div class="form-group col-lg-1">
                  <button class="btn btn-theme" id="searchlog" type="button">查询</button>
                </div>
                <div >
                  <button class="btn btn-theme" id="analyselog" type="button">分析</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-12 detailed">
          <div class="row content-panel">
            <h4>成长记录</h4>
            <div class="panel-heading">
              <ul class="nav nav-tabs nav-justified">
                <li class="active">
                  <a data-toggle="tab" href="#grade">成绩</a>
                </li>
                <li>
                  <a data-toggle="tab" href="#moral">德育</a>
                </li>
                <li>
                  <a data-toggle="tab" href="#health">体质</a>
                </li>
                <li>
                  <a data-toggle="tab" href="#basi">画像</a>
                </li>
              </ul>
            </div>
            <!-- /panel-heading -->
            <div class="panel-body">
              <div class="tab-content">
                <!-- /成绩 -->
                <div id="grade" class="tab-pane active">

                  <table class="table table-striped table-bordered table-hover table-checkable order-column" id="logtable">
                      <thead>
                          <tr>
                              <th>学号 </th>
                              <th>学院</th>
                              <th>学期</th>
                              <th>课程数</th>
                              <th>学分</th>
                              <th>平均成绩</th>
                              <th>不低于90的课程数</th>
                              <th>不低于80的课程数</th>
                              <th>不低于70的课程数</th>
                              <th>不低于60的课程数</th>
                              <th>低于60的课程数</th>
                              <th>年级</th>
                          </tr>
                      </thead>
                      <tbody>

                      </tbody>
                  </table>

                  <div class="row mt">
                    <div class="col-lg-5 col-lg-offset-3 detailed">
                      <div id="chart-1" style="width: 450px;height:400px;"></div>
                    </div>
                  </div>

                </div>

                <!-- /德育 -->
                <div id="moral" class="tab-pane">
                  <div class="col-lg-12 mt">
                      <div class="row">
                        <div class="col-md-6">
                            <h4>计算结果</h4>
                            <div class="adv-table">
                              <table cellpadding="0" cellspacing="0" border="0" class="display table table-bordered" id="hidden-table-info">
                                <thead>
                                  <tr>
                                    <th>学号</th>
                                    <th>姓名</th>
                                    <th class="hidden-phone">院系</th>
                                    <th class="hidden-phone">年级</th>
                                    <th class="hidden-phone">班级</th>
                                    <th class="hidden-phone">指标</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="gradeX">
                                    <td>E37092800</td>
                                    <td>CC</td>
                                    <td class="hidden-phone">电院</td>
                                    <td class="hidden-phone">五年级</td>
                                    <td class="hidden-phone">A1403391</td>
                                    <td class="center hidden-phone">X</td>
                                  </tr>

                                </tbody>
                              </table>
                            </div>
                            <!-- /table -->
                        </div>
                        <!-- /col-md-6 -->

                        <!-- /col-md-6 -->
                      </div>
                  </div>
                </div>

                <!-- /体质 -->
                <div id="health" class="tab-pane">
                    <div class="col-lg-12 mt">
                      <div class="row">
                        <div class="col-md-6">
                            <h4>计算结果</h4>
                            <div class="adv-table">
                              <table cellpadding="0" cellspacing="0" border="0" class="display table table-bordered" id="hidden-table-info-2">
                                <thead>
                                  <tr>
                                    <th>学号</th>
                                    <th>姓名</th>
                                    <th class="hidden-phone">院系</th>
                                    <th class="hidden-phone">年级</th>
                                    <th class="hidden-phone">班级</th>
                                    <th class="hidden-phone">指标</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="gradeX">
                                    <td>E37092800</td>
                                    <td>XX</td>
                                    <td class="hidden-phone">电院</td>
                                    <td class="hidden-phone">五年级</td>
                                    <td class="hidden-phone">A1403391</td>
                                    <td class="center hidden-phone">X</td>
                                  </tr>

                                </tbody>
                              </table>
                            </div>
                            <!-- /table -->
                        </div>
                        <!-- /col-md-6 -->

                        <!-- /col-md-6 -->
                      </div>
                  </div>
                </div>

                <!-- /画像 -->
                <div id="basi" class="tab-pane active">


              </div>
              <!-- /tab-content -->
            </div>
            <!-- /panel-body -->
          </div>
          <!-- /row content-panel -->
        </div>
        <!-- /col-lg-12 -->
      </section>
      <!-- /wrapper -->
    </section>
    <!-- /MAIN CONTENT -->
    <!--main content end-->

    <!--footer start-->
    {% include 'servermaterial/footer.html' %}
    <!--footer end-->

    <!-- js placed at the end of the document so the pages load faster -->

    <script type="text/javascript" language="javascript" src="/templates/servermaterial/lib/advanced-datatable/js/jquery.js"></script>
    <script src="/templates/servermaterial/lib/bootstrap/js/bootstrap.min.js"></script>


    <!--common script for all pages-->
    <script src="/templates/servermaterial/lib/common-scripts.js"></script>
    <!--script for this page-->

    <script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-fileupload/bootstrap-fileupload.js"></script>
    <script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-daterangepicker/date.js"></script>
    <script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-daterangepicker/moment.min.js"></script>
    <script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>

    <!--script for this page-->
    <script src="/templates/servermaterial/lib/morris-conf.js"></script>
    <script src="/templates/servermaterial/lib/morris/morris.min.js"></script>
    <script src="/templates/servermaterial/lib/raphael/raphael.min.js"></script>
    <!--script for charts-->

    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
    <script src="/templates/servermaterial/lib/echarts.min.js"></script>


    <script>
$("#searchlog").click(function(){
    stuid = $("#stuid").val();

    //datatable
    var table = $('#logtable').DataTable().clear().draw();
    table.clear().draw();
    $.ajax({
        url:"/web/query/",
        type:'POST',
        data:{'stuid':stuid},
        success: function(arg){
            ret = eval(arg);
            for(j = 0,len = ret.length; j < len; j++) {
                StuID = ret[j]["StuID"];
                //alert(StuID);

                School = ret[j]["School"];
                Semester = ret[j]["Semester"];
                CourseNum = ret[j]["CourseNum"];
                Credits = ret[j]["Credits"];
                AveScore = ret[j]["AveScore"];
                Up90 = ret[j]["Up90"];
                Up80 = ret[j]["Up80"];
                Up70 = ret[j]["Up70"];
                Up60 = ret[j]["Up60"];
                Low60 = ret[j]["Low60"];
                Grade = ret[j]["Grade"];

                table.row.add([StuID,School,Semester,CourseNum,Credits,AveScore,Up90,Up80,Up70,Up60,Low60,Grade]).draw();
            }
        }
    });
});

$("#analyselog").click(function(){
    //echarts
    $.post("/web/query1/",{'stuid':stuid}, function(ret1){
    var myChart = echarts.init(document.getElementById('chart-1'));
            option = {
              title : {
                  text: '超过同年级同学院学生比例',
              },
              tooltip : {
                  trigger: 'axis'
              },
              toolbox: {
                  show : true,
                  feature : {
                      dataView : {show: true, readOnly: false},
                      magicType : {show: true, type: ['line', 'bar']},
                      restore : {show: true},
                      saveAsImage : {show: true}
                  }
              },
              calculable : true,
              xAxis : [
                  {
                      type : 'category',
                      data : ret1['xx']
                  }
              ],
              yAxis : [
                  {
                      type : 'value'
                  }
              ],
              series : [
                  {
                      name:'比例',
                      type:'bar',
                      data:ret1['dd'],

                  }
              ]
            };
            myChart.setOption(option);
     });

});



    </script>


  </body>
</html>
