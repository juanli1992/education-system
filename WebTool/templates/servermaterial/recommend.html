<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <title>学生成长分析平台</title>

    <!-- Favicons -->
    <link href="/templates/servermaterial/img/favicon.png" rel="icon">
    <link href="/templates/servermaterial/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Bootstrap core CSS -->
    <link href="/templates/servermaterial/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!--external css-->
    <link href="/templates/servermaterial/lib/font-awesome/css/font-awesome.css" rel="stylesheet"/>
    <!-- Custom styles for this template -->
    <link href="/templates/servermaterial/css/style.css" rel="stylesheet">
    <link href="/templates/servermaterial/css/style-responsive.css" rel="stylesheet">
    <script src="/templates/servermaterial/lib/tasks.js"></script>
    <script src="/templates/servermaterial/js/jquery-1.7.2.min.js"></script>
    <script src="/templates/servermaterial/lib/echarts.min.js"></script>
    <script src="/templates/servermaterial/js/echarts-wordcloud.min.js"></script>
    <script>
        function createRandomItemStyle() {
            return {
                normal: {
                    color: 'rgb(' + [
                        Math.round(Math.random() * 160),
                        Math.round(Math.random() * 160),
                        Math.round(Math.random() * 160)
                    ].join(',') + ')'
                }
            };
        }

        $(document).ready(function () {
            $.ajax({
                url: '/web/hot_book',
                type: 'GET',
                dataType: 'JSON',
                success: function (result) {
                    var chart = echarts.init(document.getElementById('hotBookChart'));
                    option = {
                        title: {
                            text: '',
                        },
                        tooltip: {
                            show: true
                        },

                        series: [{
                            type: 'wordCloud',
                            textRotation: [0, 0, 0, 0],
                            sizeRange: [12, 60],
                            textPadding: 0,
                            autoSize: {
                                enable: true,
                                minSize: 14
                            },
                            textStyle: {
                                normal: {
                                    fontFamily: 'sans-serif',
                                    fontWeight: 'bold',
                                    // Color can be a callback function or a color string
                                    color: function () {
                                        // Random color
                                        return 'rgb(' + [
                                            Math.round(Math.random() * 160),
                                            Math.round(Math.random() * 160),
                                            Math.round(Math.random() * 160)
                                        ].join(',') + ')';
                                    }
                                },
                                emphasis: {
                                    shadowBlur: 10,
                                    shadowColor: '#333'
                                }
                            },
                            data: result
                        }]
                    };
                    chart.setOption(option);
                }

            });

            $("#id_query").click(function () {
                idr = $("#stuNo").val();
                $.ajax({
                    url: "/web/recommend",
                    type: "POST",
                    dataType: "json",
                    data: {'idr': idr},
                    success: function (result) {
                        // 查询到对应该学生的干预意见，展示在表格上
                        var newTableNode = $("<tr>\n" + "<td>" + result[0] + "</td>\n" + "<td>" + result[1]
                            + "</td>\n" + "<td>" + result[2] + "</td>\n" + "<td>" + result[3] + "</td>\n"
                            + "<td>" + result[4] + "</td>\n" + "</tr>");
                        $("tbody").children().remove();
                        $("tbody").append(newTableNode);
                        $("table").show();
                        $("#man_set").show();
                    }
                })
            });

            $("#set").click(function () {
                if ($(this).val() == "set") {
                    $("#rrate").attr("disabled", false);
                    $("#rway").attr("disabled", false);
                    $(this).val("save");
                    document.getElementById("set").innerText = "保存";
                } else {
                    $("#rrate").attr("disabled", true);
                    $("#rway").attr("disabled", true);
                    $(this).val("set");
                    document.getElementById("set").innerText = "设置";
                }
            });

            $("#query_option2").change(function () {
                var k = $(this).val();

                $.ajax({
                    url: '/web/hot_book',
                    type: 'POST',
                    dataType: 'JSON',
                    data: {'k': k},
                    success: function (result) {
                        var chart = echarts.init(document.getElementById('hotBookChart'));
                        option = {
                            title: {
                                text: '',
                            },
                            tooltip: {
                                show: true
                            },

                            series: [{
                                type: 'wordCloud',
                                textRotation: [0, 0, 0, 0],
                                sizeRange: [12, 60],
                                textPadding: 0,
                                autoSize: {
                                    enable: true,
                                    minSize: 14
                                },
                                textStyle: {
                                    normal: {
                                        fontFamily: 'sans-serif',
                                        fontWeight: 'bold',
                                        // Color can be a callback function or a color string
                                        color: function () {
                                            // Random color
                                            return 'rgb(' + [
                                                Math.round(Math.random() * 160),
                                                Math.round(Math.random() * 160),
                                                Math.round(Math.random() * 160)
                                            ].join(',') + ')';
                                        }
                                    },
                                    emphasis: {
                                        shadowBlur: 10,
                                        shadowColor: '#333'
                                    }
                                },
                                data: result
                            }]
                        };
                        chart.setOption(option);
                    }

                });
            });


        })
        ;
    </script>
    <!-- =======================================================
        Template Name: Dashio
        Template URL: https://templatemag.com/dashio-bootstrap-admin-template/
        Author: TemplateMag.com
        License: https://templatemag.com/license/
    ======================================================= -->
</head>
<body>
<!-- **********************************************************************************************************************************************************
  TOP BAR CONTENT & NOTIFICATIONS
  *********************************************************************************************************************************************************** -->
<!--header start-->
{% include 'servermaterial/header.html' %}
<!--header end-->

<!--sidebar start-->
{% include 'servermaterial/sidebar.html' %}
<!--sidebar end-->

<!--main content start-->
<section id="main-content">
    <section class="wrapper site-min-height">
        <div class="col-lg-12 detailed">
            <div class="row content-panel">
                <h4>学习资源推荐</h4>
                <div class="panel-heading">
                    <ul class="nav nav-tabs nav-justified">
                        <li class="active">
                            <a data-toggle="tab" href="#hotBook">热门书籍推荐</a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#personalize">个性化推荐</a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#personalize">优秀学生共性分析</a>
                        </li>
                    </ul>
                </div>
                <div class="panel-body">
                    <div class="tab-content">
                        <div class="tab-pane active" id="hotBook">
                            <div class="col-lg-12 detailed">
                                <div class="col-lg-12 detailed">
                                    <form role="form" class="form-horizontal">
                                        <div class="form-group col-lg-4">
                                            <label class="col-lg-4 control-label text-info"
                                                   style="font-size: 17px"><strong>学院选择</strong></label>
                                            <div class="col-lg-8">
                                                <select class="form-control" id="query_option">
                                                    <option value="all">全校学生</option>
                                                    <option>电子信息与电气工程学院</option>
                                                    <option>农业与生物学院</option>
                                                    <option>船舶海洋与建筑工程学院</option>
                                                    <option>安泰经济与管理学院</option>
                                                    <option>材料科学与工程学院</option>
                                                    <option>密西根学院</option>
                                                    <option>机械与动力工程学院</option>

                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-lg-4">
                                            <label class="col-lg-4 control-label text-info"
                                                   style="font-size: 17px"><strong>榜单范围</strong></label>
                                            <div class="col-lg-8">
                                                <select class="form-control" id="query_option2">
                                                    <option value="20">top20</option>
                                                    <option value="30">top30</option>
                                                    <option value="40">top40</option>
                                                </select>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="row">
                                    <div class="center-block">
                                        <div class="bdsharebuttonbox center-block"><a href="#" class="bds_weixin"
                                                                                      data-cmd="weixin"
                                                                                      title="分享到微信">微信</a><a href="#"
                                                                                                             class="bds_qzone"
                                                                                                             data-cmd="qzone"
                                                                                                             title="分享到QQ空间">QQ空间</a><a
                                                href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a><a
                                                href="#"
                                                class="bds_more"
                                                data-cmd="more">分享到：</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt">
                                    <div id="hotBookChart" class="center-block"
                                         style="width: 650px;height:500px;"></div>
                                </div>
                                <script>window._bd_share_config = {
                                    "common": {
                                        "bdSnsKey": {},
                                        "bdText": "",
                                        "bdMini": "1",
                                        "bdMiniList": false,
                                        "bdPic": "",
                                        "bdStyle": "0",
                                        "bdSize": "24"
                                    },
                                    "share": {"bdSize": 16},
                                    "image": {
                                        "viewList": ["weixin", "qzone", "tsina"],
                                        "viewText": "分享到：",
                                        "viewSize": "24"
                                    }
                                };
                                with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];</script>
                            </div>
                        </div>
                        <div class="tab-pane" id="personalize">
                            <div class="col-lg-12 detailed">
                                <div class="col-lg-12 detailed">

                                    <form role="form" class="form-horizontal">
                                        <div class="form-group col-lg-12">
                                            <label class="col-lg-12 control-label text-info"
                                                   style="font-size: 17px"><strong>推荐后端设置</strong></label>
                                            <h5 class="page-header"
                                                style="margin-top: 25px; margin-bottom: 5px; color: red"></h5>
                                        </div>
                                        <form role="form" class="form-horizontal">
                                            <div class="cls form-group col-lg-4">
                                                <label class="col-lg-4 control-label">推荐频率</label>
                                                <div class="col-lg-8">
                                                    <select class="form-control" id="rrate" disabled>
                                                        <option>每天一次</option>
                                                        <option>每三天一次</option>
                                                        <option>每周一次</option>
                                                        <option>每月一次</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="cls form-group col-lg-4">
                                                <label class="col-lg-4 control-label" disabled>推荐方式</label>
                                                <div class="col-lg-8">
                                                    <select class="form-control" id="rway" disabled>
                                                        <option>BOTH</option>
                                                        <option>短信通知</option>
                                                        <option>邮箱通知</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-offset-3">
                                                <button class="btn btn-theme" id="set" type="button" value="set">设置
                                                </button>
                                            </div>
                                        </form>
                                        <form role="form" class="form-horizontal">
                                            <div class="form-group col-lg-12">
                                                <label class="col-lg-12 control-label text-info"
                                                       style="font-size: 17px"><strong>推荐后端查询</strong></label>
                                                <h5 class="page-header"
                                                    style="margin-top: 25px; margin-bottom: 5px; color: red"></h5>
                                            </div>
                                            <div class="form-group col-lg-4" id="stuNo_query" style="display:block">
                                                <label class="col-lg-3 control-label">学号</label>
                                                <div class="col-lg-8">
                                                    <input type="text" id="stuNo" name="stuNo" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-4">
                                                <center>
                                                    <button type="button" class="btn btn-theme" id="id_query">查询
                                                    </button>
                                                </center>
                                            </div>
                                        </form>
                                        {#                                        <ul class="list-group" name="recommenList">#}
                                        {#                                            {% for book in book_list %}#}
                                        {#                                                <li class="list-group-item"><<{{ book }}>></li>#}
                                        {#                                            {% endfor %}#}
                                        {#                                        </ul>#}
                                        <table class="table table-bordered table-striped table-hover"
                                               style="display: none;">
                                            <thead>
                                            <tr class="info">
                                                {#                                                <th>学号</th>#}
                                                <th>推荐1</th>
                                                <th>推荐2</th>
                                                <th>推荐3</th>
                                                <th>推荐4</th>
                                                <th>推荐5</th>
                                            </tr>
                                            <tr>
                                                {#                                                    <td> {{ k }} </td>#}
                                                {#                                                {% for book in v %}#}
                                                {#                                                    <td> {{ book }}</td>#}
                                                {#                                                {% endfor %}#}
                                            </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                        <form class="form-horizontal">
                                            <div class="form-group col-lg-12">
                                                <center>
                                                    <button type="button" class="btn btn-theme" id="man_set" style="display: none">手工配置
                                                    </button>
                                                </center>
                                            </div>
                                        </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- /wrapper -->
</section>
<!-- /MAIN CONTENT -->
<!--main content end-->

<!--footer start-->
{% include 'servermaterial/footer.html' %}
<!--footer end-->

<!-- js placed at the end of the document so the pages load faster -->
<script src="/templates/servermaterial/lib/jquery/jquery.min.js"></script>
<script src="/templates/servermaterial/lib/bootstrap/js/bootstrap.min.js"></script>
<script class="include" type="text/javascript" src="/templates/servermaterial/lib/jquery.dcjqaccordion.2.7.js"></script>
<script src="/templates/servermaterial/lib/jquery.scrollTo.min.js"></script>
<script src="/templates/servermaterial/lib/jquery.nicescroll.js" type="text/javascript"></script>
<!--common script for all pages-->
<script src="/templates/servermaterial/lib/common-scripts.js"></script>
<!--script for this page-->
<script src="/templates/servermaterial/lib/jquery-ui-1.9.2.custom.min.js"></script>
<script type="text/javascript"
        src="/templates/servermaterial/lib/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-daterangepicker/date.js"></script>
<script type="text/javascript"
        src="/templates/servermaterial/lib/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript"
        src="/templates/servermaterial/lib/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="/templates/servermaterial/lib/bootstrap-daterangepicker/moment.min.js"></script>
<script type="text/javascript"
        src="/templates/servermaterial/lib/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
<script src="/templates/servermaterial/lib/advanced-form-components.js"></script>
</body>
</html>
